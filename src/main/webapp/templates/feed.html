<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org">

<head>
    <link rel="stylesheet" type="text/css" href="fileCSS.css"/>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <meta name="description" content=""/>
    <meta name="author" content=""/>
    <title>Starter Template for Bootstrap</title>

    <!-- Bootstrap core CSS -->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet"/>

    <!-- Custom styles for this template -->
    <style>
        body {
            padding-top: 50px;
        }

        .starter-template {
            padding: 40px 15px;
            text-align: center;
        }
    </style>

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>

<body>

<div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#">Polytech</a>
        </div>
        <div class="collapse navbar-collapse">
            <ul class="nav navbar-nav">
                <li class="active"><a href="#">Home</a></li>
                <li><a href="#about">About</a></li>
                <li><a href="#contact">Contact</a></li>
            </ul>
        </div><!--/.nav-collapse -->
    </div>
</div>

<div class="container">






    <div class="starter-template">
        <form th:action="@{logout}" method="POST">
            <input type="submit" value ="Logout"/>
        </form>

        <h1>Polytech Social Network</h1>
        <p class="lead">Reseau social de Polytech <br/> Exercice</p>
        <form class="form-style-4" action="/share" method="POST">
            <label><!--for="content"-->
                <span>What is in your mind?</span><textarea name="content" onkeyup="adjust_textarea(this)" required="true"></textarea>
            </label>
            <label>
                <span>&nbsp;</span><input type="submit" value="Share" name="Share"/>
            </label>
        </form>

        <!-- Posts -->
        <h3>Message poste</h3>
        <div class="row feed" th:each="posts:${posts}">
            <div class="col-md-12">
                <div class="panel panel-default">
                    <div class="panel-body">
                        <h4 class="bg-danger" th:text="${posts.getAuthor()}"></h4>
                        <p th:text="${posts.getContent()}"></p>

                        <!-- Like button-->
                        <form action="/shareLike" method="POST">
                            <label>
                                <input class="btn btn-primary" th:value="${posts.getId()}" type="submit" name="id"/>
                            </label>
                        </form>

                        <!--Affichage like -->
                        <p>---LIKE---</p>
                        <div class="row feed" th:each="likes:${likes}">
                           <!-- <p th:text="${posts.setLikes(likes)}"></p>-->
                            <p th:if="${likes.getidPost()} == ${posts.getId()}" th:text="${likes.getidAuthor()}"></p>
                        </div>
                    </div>


                    <!-- Formulaire commentaire -->
                    <form class="form-style-9" action="/shareComment" method="POST">
                        <label><!--for="content"-->
                            <textarea  placeholder="Comments ? " name="content" onkeyup="adjust_textarea(this)" required="true"></textarea>
                        </label>
                        <label>
                            <!--<span>&nbsp;</span><input type="submit" value="Share" name="Share"/> -->
                            <!--"@{'newComment' + ${post.id}}" -->
                            <span>&nbsp;</span><input type="submit" th:value="${posts.getId()}" name="id"/>
                        </label>
                    </form>

                    <!-- Affichage commentaires -->
                    <div class="bg-info" float="left" th:each="comments:${comments}">
                        <!-- <p th:text="${posts.setLikes(likes)}"></p>
                        <p th:text="${comments.getidAuthor()}"></p>
                        <p th:text="${comments.getContent()}"></p>-->
                        <p th:if="${comments.getidPost()} == ${posts.getId()}" th:text="${comments.getidAuthor()}"></p>
                        <p th:if="${comments.getidPost()} == ${posts.getId()}"  th:text="${comments.getContent()}"></p>
                    </div>
                </div>

            </div>
        </div>-

    </div>


</div><!-- /.container -->

<script type="text/javascript">
    //auto expand textarea
    function adjust_textarea(h) {
        h.style.height = "20px";
        h.style.height = (h.scrollHeight)+"px";
    }

</script>

<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</body>
</html>